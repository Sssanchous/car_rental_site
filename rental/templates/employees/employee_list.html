{% extends "base.html" %}
{% block title %}Сотрудники{% endblock %}

{% block content %}
<h2 class="mb-4">Сотрудники</h2>

<form method="get" class="mb-3 d-flex">
    <input type="text" name="search" class="form-control w-auto me-2"
           placeholder="Поиск..." value="{{ search }}">
    <button class="btn btn-primary">Найти</button>
</form>

<a class="btn btn-success mb-3" href="{% url 'employee_add' %}">Добавить сотрудника</a>

<table class="table table-bordered table-striped">
    <tr>
        <th>
            <a href="?sort={% if sort == 'name_asc' %}name_desc{% else %}name_asc{% endif %}">
                ФИО
                {% if sort == 'name_asc' %}
                    ↑
                {% elif sort == 'name_desc' %}
                    ↓
                {% endif %}
            </a>
        </th>

        <th>Должность</th>
        <th>Филиал</th>
        <th>Телефон</th>
        <th>Email</th>
        <th></th>
    </tr>

    {% for e in employees %}
    <tr>
        <td>{{ e.full_name }}</td>
        <td>{{ e.role.name }}</td>
        <td>{{ e.branch.name }}</td>
        <td>{{ e.phone }}</td>
        <td>{{ e.email }}</td>
        <td class="text-nowrap">
            <a href="{% url 'employee_edit' e.employee_id %}" class="btn btn-sm btn-primary">Изм.</a>
            <a href="{% url 'employee_delete' e.employee_id %}" class="btn btn-sm btn-danger">Удал.</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
