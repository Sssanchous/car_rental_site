{% extends "base.html" %}
{% block title %}Клиенты{% endblock %}

{% block content %}
<h2 class="mb-4">Клиенты</h2>

<form method="get" class="mb-3 d-flex">
    <input type="text" name="search" class="form-control w-auto me-2"
           placeholder="Поиск..." value="{{ search }}">
    <button class="btn btn-primary">Найти</button>
</form>

<a class="btn btn-success mb-3" href="{% url 'client_add' %}">Добавить клиента</a>

<table class="table table-bordered table-striped">
    <tr>
        <th>
            <a href="?sort={% if sort == 'name_asc' %}name_desc{% else %}name_asc{% endif %}">
                ФИО
                {% if sort == 'name_asc' %}
                    ↑
                {% elif sort == 'name_desc' %}
                    ↓
                {% endif %}
            </a>
        </th>

        <th>Телефон</th>
        <th>Email</th>
        <th>Адрес</th>
        <th></th>
    </tr>

    {% for c in clients %}
    <tr>
        <td>{{ c.full_name }}</td>
        <td>{{ c.phone }}</td>
        <td>{{ c.email }}</td>
        <td>{{ c.address }}</td>
        <td class="text-nowrap">
            <a href="{% url 'client_edit' c.client_id %}" class="btn btn-sm btn-primary">Изм.</a>
            <a href="{% url 'client_delete' c.client_id %}" class="btn btn-sm btn-danger">Удал.</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
